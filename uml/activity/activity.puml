@startuml
title Activity Diagram: Algorithm Selection & Execution

start

:User selects Algorithm in ControlPanel;

if (Algorithm == Dijkstra?) then (Yes)
    :Show End Vertex selection;
    :User selects Start and End Vertices;
    
    if (Is Graph Weighted?) then (No)
        :Show Warning: "Dijkstra algorithm is best used on a weighted graph.";
    else (Yes)
    endif
else (No)
    :Hide End Vertex selection;
    :User selects Start Vertex only;
endif

:User clicks "Start Algorithm";

:Initialize Algorithm Controller;
:Initialize AlgoState and push to m_history[0];
:Reset graph visual styles;

repeat
    if (User Action?) then (Click "Next" / QTimer)
        if (Is Step in m_history?) then (Yes)
            :Move to next index in m_history;
        else (No)
            :AlgorithmController calculates nextStep();
            :Update AlgoState (Current, Visited, Frontier);
            :Push new AlgoState to m_history;
        endif
    else (Click "Prev")
        if (Current Step > 0?) then (Yes)
            :Move to previous index in m_history;
        else (No)
            :Do nothing (At Start);
        endif
    endif

    :MainWindow calls applyState(currentState);
    :Set Current Node to Yellow;
    :Set Frontier Nodes to Cyan;
    :Set Visited Nodes to Green;
    :Highlight Active Edges;

repeat while (Is algorithm finished?) is (No)

->Yes;

if (Algorithm == Dijkstra?) then (Yes)
    :AlgorithmController reconstructs shortest path;
    :MainWindow highlights path vertices and edges in Magenta;
else (No)
endif

:Show "Finished" Message;

stop
@enduml
